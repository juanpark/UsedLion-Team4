<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}"
      th:with="hideHeader=true, hideFooter=true">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>ìœ ì € ì •ë³´</title>

  <script>
    function openReportModal() {
      document.getElementById("reportModal").style.display = "block";
    }
    function closeReportModal() {
      document.getElementById("reportModal").style.display = "none";
    }
    window.onclick = function (event) {
      const modal = document.getElementById("reportModal");
      if (event.target == modal) {
        modal.style.display = "none";
      }
    };
  </script>
</head>


<body class="login-body">
<!-- Hide header and footer -->
<div layout:fragment="content">

  <div class="d-flex align-items-center justify-content-center" style="min-height: 100vh;">
    <div class="glass-card d-flex flex-column align-items-center p-4 w-100" style="max-width: 700px;">

      <h2 class="mb-3">ğŸ‘¤ ìœ ì € ì •ë³´</h2>
      <div class="bg-white p-3 rounded shadow-sm card">
        <p>ë‹‰ë„¤ì„: <strong th:text="${user.nickname}"></strong></p>
        <p>ì´ë©”ì¼: <strong th:text="${user.email}">ì‘ì„±ì</strong></p>
        <p>
          ì‹ ê³ :
          <a
                  href="javascript:void(0);"
                  onclick="openReportModal()"
                  class="text-danger fw-semibold"
          >
            [[${reportCount}]]íšŒ
          </a>
        </p>
      </div>

      <!-- ì‹ ê³  ëª¨ë‹¬ -->
      <div id="reportModal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="closeReportModal()">&times;</span>
          <h5>ğŸš¨ ì‹ ê³  ë‚´ì—­</h5>
          <ul class="mt-3 list-group" style="max-width: 600px; width: 100%;">
            <li class="list-group-item" th:each="report : ${reports}">
              ì‚¬ìœ : <span th:text="${report.content}">ì‹ ê³  ì‚¬ìœ </span>
            </li>
          </ul>
        </div>
      </div>

      <!-- ì¢‹ì•„ìš”í•œ ê²Œì‹œê¸€ -->
      <div class="row w-100 mt-4">
        <div class="col-12">
          <h4 class="mb-3">ğŸ‘ ì¢‹ì•„ìš”í•œ ê²Œì‹œê¸€ ìˆ˜: <span th:text="${likeCount}">0</span>ê°œ</h4>
          <ul class="list-group">
            <li class="list-group-item fw-bold">
              <div class="row text-center">
                <div class="col">ì œëª©</div>
                <div class="col">ì¡°íšŒìˆ˜</div>
                <div class="col">ì‘ì„± ë‚ ì§œ</div>
                <div class="col">ì¸ë„¤ì¼</div>
              </div>
            </li>
            <li class="list-group-item">
              <div class="row text-center align-items-center" th:each="like : ${likes}">
                <div class="col" th:text="${like.post.title}">ì œëª©</div>
                <div class="col" th:text="${like.post.view}">0</div>
                <div class="col" th:text="${#temporals.format(like.post.created_at, 'yyyy-MM-dd')}">ë‚ ì§œ</div>
                <div class="col">
                  <img th:if="${like.img != null}" th:src="'data:image/jpeg;base64,' + ${like.img}" style="max-height: 40px;" />
                </div>
              </div>
            </li>
          </ul>
        </div>
      </div>

      <!-- ì‘ì„±í•œ ê²Œì‹œê¸€ -->
      <div class="row w-100 mt-4">
        <div class="col-12">
          <h4 class="mb-3">ğŸ“ ê²Œì‹œê¸€ ìˆ˜: <span th:text="${postCount}">0</span>ê°œ</h4>
          <ul class="list-group">
            <li class="list-group-item fw-bold">
              <div class="row text-center">
                <div class="col">ì œëª©</div>
                <div class="col">ì¡°íšŒìˆ˜</div>
                <div class="col">ì‘ì„± ë‚ ì§œ</div>
                <div class="col">ì¸ë„¤ì¼</div>
              </div>
            </li>
            <li class="list-group-item">
              <div class="row text-center align-items-center" th:each="post : ${posts}">
                <div class="col" th:text="${post.post.title}">ì œëª©</div>
                <div class="col" th:text="${post.post.view}">0</div>
                <div class="col" th:text="${#temporals.format(post.post.created_at, 'yyyy-MM-dd')}">ë‚ ì§œ</div>
                <div class="col">
                  <img th:if="${post.img != null}" th:src="'data:image/jpeg;base64,' + ${post.img}" style="max-height: 40px;" />
                </div>
              </div>
            </li>
          </ul>
        </div>
      </div>

      <!-- ì‘ì„±í•œ ëŒ“ê¸€ -->
      <div class="row w-100 mt-4">
        <div class="col-12">
          <h4 class="mb-3">ğŸ’¬ ëŒ“ê¸€ ìˆ˜: <span th:text="${replyCount}">0</span>ê°œ</h4>
          <ul class="list-group">
            <li class="list-group-item fw-bold">
              <div class="row text-center">
                <div class="col">ì œëª©</div>
                <div class="col">ë‚´ìš©</div>
                <div class="col">ì‘ì„± ë‚ ì§œ</div>
              </div>
            </li>
            <li class="list-group-item" th:each="reply : ${replies}">
              <div class="row text-center align-items-center">
                <div class="col" th:text="${reply.postTitle}">ì œëª©</div>
                <div class="col" th:text="${reply.content}">ë‚´ìš©</div>
                <div class="col" th:text="${#temporals.format(reply.created_at, 'yyyy-MM-dd')}">ë‚ ì§œ</div>
              </div>
            </li>
          </ul>
        </div>
      </div>

      <div class="mt-4 text-end">
        <button class="btn btn-secondary" onclick="history.back()">
          â¬… ì´ì „ìœ¼ë¡œ
        </button>
      </div>
    </div>
  </div>
</body>
</html>
