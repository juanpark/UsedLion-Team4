<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>댓글 목록</title>
</head>
<body>
<h1 th:text="'댓글 (게시글 ID = ' + ${newReply.postId} + ')'">
    댓글
</h1>


<!-- 댓글 작성 폼 -->
<form th:action="@{/replies/post/{postId}(postId=${newReply.postId})}"
      th:object="${newReply}" method="post">
    <input type="hidden" th:field="*{postId}" readonly />
    <input type="hidden" th:field="*{ref}" />
    <input type="hidden" th:field="*{level}" />

    <div>
        <label>프로필 ID:</label>
        <input type="number" th:field="*{profileId}" required />
    </div>
    <div>
        <label>내용:</label>
        <textarea th:field="*{content}" required></textarea>
    </div>
    <button type="submit">등록</button>
</form>

<hr/>

<!-- 댓글이 하나도 없으면 -->
<div th:if="${#lists.isEmpty(replies)}">
    <p>아직 댓글이 없습니다.</p>
</div>
<!-- 댓글이 하나라도 있으면 -->
<ul th:unless="${#lists.isEmpty(replies)}">
    <li th:each="r : ${replies}">
        <span th:text="${r.profileId}">프로필</span>:
        <span th:text="${r.content}">내용</span>
        <small th:text="${#temporals.format(r.date,'yyyy-MM-dd HH:mm')}">날짜</small>
        [<a th:href="@{/replies/edit/{id}(id=${r.replyId})}">수정</a>]
        [<a th:href="@{/replies/delete/{id}(id=${r.replyId})}"
            onclick="return confirm('삭제할까요?');">삭제</a>]
    </li>
</ul>
</body>
</html>
