<form
  th:action="${update} ? @{/post/{id}(id=${post.postId})} : @{/post/create}"
  method="post"
  enctype="multipart/form-data"
>
  <!-- PUT 방식 흉내 -->
  <input type="hidden" name="_method" th:value="${update} ? 'put' : 'post'" />

  <label for="title">제목:</label>
  <input
    type="text"
    id="title"
    name="title"
    th:value="${update} ? ${post.title} : ''"
    required
  />
  <br />
  <label for="price">가격:</label>
  <input
    type="number"
    id="price"
    name="price"
    th:value="${update} ? ${post.price} : ''"
    required
  /><br />

  <label for="content">내용:</label>
  <textarea
    id="content"
    name="content"
    rows="5"
    required
    th:text="${update} ? ${post.content} : ''"
  >
내용</textarea
  >

  <label for="status">판매 상태:</label><br />
  <select id="status" name="status" required>
    <option value="ONSALE">판매중</option>
    <option value="RESERVED">예약중</option>
    <option value="SOLDOUT">판매완료</option></select
  ><br /><br />
  <div th:if="${update}">
    <h4>기존 이미지</h4>
    <div th:each="img, iterStat : ${imageList}">
      <div style="margin-bottom: 10px">
        <img
          th:src="'data:image/jpeg;base64,' + ${img}"
          alt="기존 이미지"
          style="max-width: 150px; max-height: 150px; border: 1px solid #ccc"
        />
        <label>
          <input
            type="checkbox"
            name="deleteImages"
            th:value="${iterStat.index}"
          />
          삭제
        </label>
      </div>
    </div>
  </div>
  <label for="file">이미지 첨부:</label><br />
  <input
    type="file"
    id="file"
    name="file"
    accept="image/*"
    multiple
  /><br /><br />

  <button
    type="submit"
    th:text="${update} ? '수정 완료' : '작성 완료'"
  ></button>
</form>
